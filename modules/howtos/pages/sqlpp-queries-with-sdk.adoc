= {sqlpp} Queries from the {cpp} SDK
:page-aliases: n1ql-queries-with-sdk.adoc
:description: 


// Note to editors
// 
// This page pulls in content from -sdk-common-
// and code samples from -example-dir-
// 
// It can be seen built at wwww.


[abstract]
{description}

include::project-docs:partial$preview-warning.adoc[]


// remember - inventory scope ;)


[source,sqlpp]
----
CREATE PRIMARY INDEX ON 'travel-sample';
SELECT country, id, name
FROM 'travel-sample'
WHERE type = "airline"
AND country = "United States"
   AND id BETWEEN 0 AND 1000
ORDER BY id
LIMIT 10
OFFSET 5;
----

== Indexes

You don't need to create an index to query a keyspace.
However, an index can help you to query a keyspace more efficiently.

=== Primary Index

Primary indexes are optional.
They may improve the efficiency of ad-hoc queries that are not supported by a secondary index.

=== Secondary Index

// <3.5 it's in the concept - rewrite HERE!

Indexes help to improve the performance of a query.
An index replicates a subset of the fields and documents stored in the Data service.
This allows specific data (for example, specific fields) to be retrieved quickly.

You can also create a _secondary index_ on specific fields in a keyspace.
Secondary indexes, often referred to as Global Secondary Indexes or GSIs, constitute the principal means of indexing documents to be accessed by the Query service.

For example, creating a secondary index on the `name` and `email` fields in the `users` keyspace would allow you to query the keyspace regarding a document's `name` or `email` properties.


==== Prepared 

modules/n1ql/pages/n1ql-intro/queriesandresults.adoc







// cli
////
== Creating an index

To improve the speed of your queries, you can use the query editor to add an index to the bucket.
To do this, enter the following command into the editor and press btn:[Enter].

[source, sqlpp]
----
create primary index course_idx on `course-record-collection`
----

This will create a single index (`course_idx`) on your `course-record-collection`.
////




////
Michael R saieth:
 just learned an awesome tool for troubleshooting query timeouts.  So you can see what the server did with the request.
select * from system:completed_requests 

"completed_requests": {
      "clientContextID": "f24fe9fc-3480-42e9-9404-61c2e0527dad",
      "cpuTime": "7.626µs",
      "elapsedTime": "3.581500973s",
      "errorCount": 0,
      "errors": [],
      "n1qlFeatCtrl": 76,
      "node": "127.0.0.1:8091",
      "phaseOperators": {
        "authorize": 1,
        "stream": 1
      },
      "phaseTimes": {
        "authorize": "10.71µs",
        "instantiate": "5.47µs",
        "parse": "379.745µs",
        "plan": "18.35µs",
        "plan.keyspace.metadata": "3.498µs",
        "run": "3.581035378s",
        "stream": "5.435µs"
      },
      "remoteAddr": "127.0.0.1:51820",
      "requestId": "46c22706-a11d-4289-888a-d626d051f25e",
      "requestTime": "2023-10-23T11:10:48.548-07:00",
      "resultCount": 0,
      "resultSize": 0,
      "scanConsistency": "unbounded",
      "serviceTime": "3.581444592s",
      "state": "completed",
      "statement": "CREATE PRIMARY INDEX ON `b79483ae-89fd-486e-bd30-f29bcdeff9e6`.`21c1d144-bbef-4d21-bc3f-4367a745e4ad`.`423a8f7a-69da-4729-aac4-6e387d6e49ff` WITH {\"num_replica\":0}",
      "statementType": "CREATE_PRIMARY_INDEX",
      "useCBO": true,
      "userAgent": "couchbase-java/0.0.0 (Mac OS X 13.3.1 x86_64; Java HotSpot(TM) 64-Bit Server VM 17.0.1+12-LTS-39)",
      "users": "builtin:Administrator"
    }
////
